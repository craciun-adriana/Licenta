<form [formGroup]="userDetailsForm">
    <div class="grid-container">

        <div *ngIf="userId==''">
            <button mat-raised-button color="primary" (click)="deleteUser()">Delete my account</button>
        </div>

        <div id="picture">
            <img alt="Profile picture" [src]="user?.profilePicture" width="80" height="80" />
        </div>

        <div id="user-name">
            <span *ngIf="userId !==''" id="username"> {{user?.userName}} </span>
            <mat-form-field>
                <mat-label>Username</mat-label>
                <input *ngIf="userId==''" matInput formControlName="userName" type="text">
            </mat-form-field>

            <br><span *ngIf="userId!==''">{{user?.firstName}} </span>
            <mat-form-field>
                <mat-label>First name</mat-label>
                <input *ngIf="userId==''" matInput formControlName="firstName" type="text">
            </mat-form-field>

            <span *ngIf="userId!==''">{{user?.lastName}} </span>
            <mat-form-field>
                <mat-label>Last name</mat-label>
                <input *ngIf="userId==''" matInput formControlName="lastName" type="text">
            </mat-form-field>
        </div>

        <div id="rank">
            <span>{{user?.firstName}} has finished {{user?.rank}} films, series and books.</span>
        </div>

        <div id="user-details">
            <div>
                <b>Description: </b>
                <span *ngIf="userId!==''">{{user?.description}}</span>
                <mat-form-field>
                    <mat-label>Description</mat-label>
                    <textarea matInput *ngIf="userId==''" formControlName="description" type="text">
                    </textarea>
                </mat-form-field>
            </div>

            <div>
                <b>Date of birth: </b>
                <span *ngIf="userId!==''">{{user?.dateOfBirth | date:'longDate'}}</span>
                <input *ngIf="userId==''" formControlName="dateOfBirth" type="date">
            </div>

            <div><b>Sex: </b> <span *ngIf="userId!==''">{{user?.sex}}</span>
                <mat-form-field>
                    <mat-select *ngIf="userId==''" formControlName="sex" type="text">
                        <mat-option value="Other">Other</mat-option>
                        <mat-option value="Male">Male</mat-option>
                        <mat-option value="Female">Female</mat-option>
                    </mat-select>
                </mat-form-field>
            </div>
        </div>

        <div *ngIf="userId!==''" id="friendship">
            <button *ngIf="friendshipStatus==='not exist'" mat-raised-button color="primary"
                (click)="sendFriendshipRequest()">Send friendship
                request</button>
            <button *ngIf="friendshipStatus==='friends'" mat-raised-button color="primary"
                (click)="deleteFriendship()">Delete friendship</button>
            <button *ngIf="friendshipStatus==='received'" mat-raised-button color="primary"
                (click)="acceptFriendship()">Accept friend request</button>
            <div *ngIf="friendshipStatus==='sent'">
                <span>Wait for {{user?.userName}} to accept your friendship request,</span>
                <button mat-raised-button color="primary" (click)="deleteFriendship()">Or delete friendship
                    request.</button>
            </div>
        </div>

        <div *ngIf="userId==''">
            <span>View your books with chosen status:</span>
            <mat-form-field appearance="fill">
                <mat-label>Status</mat-label>
                <mat-select (selectionChange)="filterReviews($event.value)" value="Completed">
                    <mat-option value="Planning">Planning</mat-option>
                    <mat-option value="Completed">Completed</mat-option>
                    <mat-option value="Ongoing">Ongoing</mat-option>
                    <mat-option value="OnHold">OnHold</mat-option>
                    <mat-option value="Dropped">Dropped</mat-option>
                </mat-select>
            </mat-form-field>
        </div>

        <div class="tables">
            <table id="books-read">
                <thead>
                    <tr>
                        <th>Books read by {{user?.userName}}</th>
                    </tr>
                </thead>
                <tbody>
                    <tr *ngFor="let reviewBook of reviewBooks">
                        <td>{{reviewBook.book?.title}}</td>
                    </tr>
                </tbody>
            </table>

            <table id="films-viewed">
                <thead>
                    <tr>
                        <th>Films viewed by {{user?.userName}}</th>
                    </tr>
                </thead>
                <tbody>
                    <tr *ngFor="let reviewFilm of reviewFilms">
                        <td>{{reviewFilm.film?.title}}</td>
                    </tr>
                </tbody>
            </table>

            <table id="series-viewed">
                <thead>
                    <tr>
                        <th>Series viewed by {{user?.userName}}</th>
                    </tr>
                </thead>
                <tbody>
                    <tr *ngFor="let reviewSerie of reviewSeries">
                        <td>{{reviewSerie.series?.title}}</td>
                    </tr>
                </tbody>
            </table>
        </div>
    </div>

    <div *ngIf="userId==''">
        <button class="button-update-info" mat-raised-button color="primary" (click)="updateUser()">Update my
            information</button>
    </div>
</form>
